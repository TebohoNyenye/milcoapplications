{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <meta name="author" content="" />
  <link rel="shortcut icon" href="../images/about-img.png" type="image/x-icon">

  <title>MILCO.</title>


 
  <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.css' %}" />
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" />
  <link href="{% static 'css/font-awesome.min.css' %}" rel="stylesheet" />
  <link href="{% static 'css/style.css' %}" rel="stylesheet" />
  <link href="{% static 'css/responsive.css' %}" rel="stylesheet" />

</head>
  <body class="sub_page">

    <div class="hero_area">
  
  
      <header class="header_section">
        <div class="container-fluid">
          <nav class="navbar navbar-expand-lg custom_nav-container ">
            <a class="navbar-brand" href="index.html">
              <span>
                <img src="{% static 'images/logo.png' %}" alt="" style="width: 80px; height: 40px;">
              </span>
            </a>
  
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <span class=""> </span>
            </button>
  
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="navbar-nav">
                <li class="nav-item">
                  <a class="nav-link" href="{% url 'home' %}">Home </a>
                </li>
                <li class="nav-item active">
                  <a class="nav-link" href="{% url 'products' %}"> Products<span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="{% url 'about' %}"> About </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="{% url 'contact' %}">Contact Us</a>
                </li>
              </ul>
              <div class="user_option-box">
               
                <a href="{% url 'cart' %}">
                  <i class="fa fa-cart-plus" aria-hidden="true"></i><i id="cart-total">  .{{cartItems}}</i>
                </a>
               
              </div>
            </div>
          </nav>
        </div>
        
      </header>
   
    </div>
   
  <section class="shop_section layout_padding">
    <div class="container py-5 h-100">
      <div class="row d-flex justify-content-center align-items-center h-100">
        
        <div class="col">
          <div class="card">
            <div class="card-body p-4" >
  
              <div class="row">
  
                <div class="col-lg-7" >
                  <h5 class="mb-3"><a href="{% url 'products' %}" class="text-body"><i
                        class="fa fa-long-arrow-left" href="{% url 'products' %}"></i> Continue shopping</a></h5>
                  <hr>
  
                  <div class="d-flex justify-content-between align-items-center mb-4">
                    <div>
                      <p class="mb-1">Shopping cart</p>
                      <p class="mb-0">You have {{order.get_cart_items}} items in your cart</p>
                    </div>
                    <div>
                      <p class="mb-0"><span class="text-muted">Sort by:</span> <a href="#!"
                          class="text-body">price <i class="fa fa-arrow-down"></i></a></p>
                    </div>
                  </div>
                  {% for item in items %}
                  <div class="card mb-3"style="box-shadow: 5px 10px 8px #888888;">
                    <div class="card-body">
                      <div class="d-flex justify-content-between">
                        <div class="d-flex flex-row align-items-center">
                          <div>
                            <img
                              src="{{item.product.imageURL}}"
                              class="img-fluid rounded" alt="Shopping item" style="width: 65px;">
                          </div>
                          <div class="ms-3" style="margin-left:20px;">
                            <h5>{{item.product.name}}</h5>
                            <p class="small mb-0">LSL{{item.product.price|floatformat:2}}</p>
                          </div>
                        </div>
                        <div class="d-flex flex-row align-items-center">
                          <div style="width: 50px;">
                            <h5 class="fw-normal mb-0" >{{item.quantity}}

                              <div class="quantity">
                                <img data-product="{{item.product.id}}" data-action="add" class="chg-quantity update-cart" src="{% static  'images/arrow-up.png' %}">
                            
                                <img data-product="{{item.product.id}}" data-action="remove" class="chg-quantity update-cart" src="{% static  'images/arrow-down.png' %}">
                              </div>
                            </h5>
                            
                          </div>
                          <div style="width: 80px;">
                            <input type="hidden" value="{{item.get_total|floatformat:2}}"/>
                            <h6 class="mb-0"><span style="font-size:12px;">LSL</span>{{item.get_total|floatformat:2}}</h6>
                          </div>
                          <a><i data-product="{{item.product.id}}"  data-action="delete"  class="chg-quantity update-cart fa fa-trash"></i></a>
                        </div>
                      </div>
                    </div>
                  </div>
                  {% endfor %}
                </div>
                <div class="col-lg-5">
  
                  <div class="card bg-danger text-white rounded-3">
                    <div class="card-body">
                      <div class="d-flex justify-content-between align-items-center mb-4">
                        <h5 class="mb-0">Card details</h5>
                      
                      </div>
  
                      <p class="small mb-2">Card type</p>
                      <a href="#!" type="submit" class="text-white"><i
                          class="fa fa-cc-mastercard"></i></a>
                      <a href="#!" type="submit" class="text-white"><i
                          class="fa fa-cc-visa"></i></a>
                      <a href="#!" type="submit" class="text-white"><i
                          class="fa fa-cc-amex"></i></a>
                      <a href="#!" type="submit" class="text-white"><i class="fa fa-cc-paypal"></i></a>
  
                      <form class="mt-4">
                        <div class="form-outline form-white mb-4">
                          <input type="text" id="typeName" class="form-control form-control-lg" siez="17"
                            placeholder="Cardholder's Name" value="{{request.user.customer.holder}}" />
                          <label class="form-label" for="typeName">Cardholder's Name</label>
                        </div>
  
                        <div class="form-outline form-white mb-4">
                          <input type="text" id="typeText" class="form-control form-control-lg" siez="17"
                            placeholder="" minlength="19" maxlength="19"value="{{request.user.customer.AccNo}}"/>
                          <label class="form-label" for="typeText">Card Number</label>
                        </div>
  
                      
  
                      </form>
  
                      <hr class="my-4">
  
                     <!-- <div class="d-flex justify-content-between">
                        <p class="mb-2">Subtotal</p>
                        <p class="mb-2">LSL 4798.00</p>
                      </div>
  
                      <div class="d-flex justify-content-between">
                        <p class="mb-2">Delivery</p>
                        <p class="mb-2">LSL 20.00</p>
                      </div>
                      -->
                      <div class="d-flex justify-content-between mb-4">
                        <p class="mb-2">Total(Incl. taxes)</p>
                        <p class="mb-2">LSL {{order.get_cart_total|floatformat:2}}</p>
                      </div>
                      <a href="{% url 'checkout' %}" >
                      <button type="button" class="btn btn-warning btn-block btn-lg" >
                        <div class="d-flex justify-content-between" >
                          <span>LSL {{order.get_cart_total|floatformat:2}}</span>
                          <span>Checkout <i class="fa fa-long-arrow-right"></i></span>
                        </div>
                      </button>
                    </a>
                    </div>
                  </div>
  
                </div>
  
              </div>
  
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

<footer class="footer_section">
    <div class="container">
      <div class="row">
        <div class="col-md-6 col-lg-3 footer-col">
          <div class="footer_detail">
            <h4>
              About
            </h4>
            <p>
              Necessary, making this the first true generator on the Internet. It uses a dictionary of over 200 Latin words, combined with
            </p>
            <div class="footer_social">
              <a href="">
                <i class="fa fa-facebook" aria-hidden="true"></i>
              </a>
              <a href="">
                <i class="fa fa-twitter" aria-hidden="true"></i>
              </a>
              <a href="">
                <i class="fa fa-linkedin" aria-hidden="true"></i>
              </a>
              <a href="">
                <i class="fa fa-instagram" aria-hidden="true"></i>
              </a>
            </div>
          </div>
        </div>
        <div class="col-md-6 col-lg-3 footer-col">
          <div class="footer_contact">
            <h4>
              Reach at..
            </h4>
            <div class="contact_link_box">
              <a href="">
                <i class="fa fa-map-marker" aria-hidden="true"></i>
                <span>
                  Location
                </span>
              </a>
              <a href="">
                <i class="fa fa-phone" aria-hidden="true"></i>
                <span>
                  Call +266 50026273
                </span>
              </a>
              <a href="">
                <i class="fa fa-envelope" aria-hidden="true"></i>
                <span>
                  demo@gmail.com
                </span>
              </a>
            </div>
          </div>
        </div>
        <div class="col-md-6 col-lg-3 footer-col">
          <div class="footer_contact">
            <h4>
              Subscribe
            </h4>
            <form action="#">
              <input type="text" placeholder="Enter email" />
              <button type="submit">
                Subscribe
              </button>
            </form>
          </div>
        </div>
        <div class="col-md-6 col-lg-3 footer-col">
          <div class="map_container">
            <div class="map">
              <div id="googleMap"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="footer-info">
        <p>
          &copy; <span id="displayYear"></span> All Rights Reserved By
          <a href="#">MILCO</a>
        </p>
      </div>
    </div>
  </footer>
  <script type="text/javascript" src="{% static 'js/cart.js' %}"></script>
  <script>
    var user = '{{request.user}}'

    
function getToken(name) {
    var cookieValue = null;
    if (document.cookie && document.cookie !== '') {
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookie = cookies[i].trim();
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}
var csrftoken = getToken('csrftoken')

function getCookie(name) {
    // Split cookie string and get all individual name=value pairs in an array
    var cookieArr = document.cookie.split(";");

    // Loop through the array elements
    for(var i = 0; i < cookieArr.length; i++) {
        var cookiePair = cookieArr[i].split("=");

        /* Removing whitespace at the beginning of the cookie name
        and compare it with the given string */
        if(name == cookiePair[0].trim()) {
            // Decode the cookie value and return
            return decodeURIComponent(cookiePair[1]);
        }
    }

    // Return null if not found
    return null;
}
var cart = JSON.parse(getCookie('cart'))

if (cart == undefined){
  cart = {}
  console.log('Cart Created!', cart)
  document.cookie ='cart=' + JSON.stringify(cart) + ";domain=;path=/"
}
console.log('Cart:', cart)

var a=100;
var b = 101;
var c = a-b;
console.log(c);
if (a>b){
  console.log("good");
}else{
  console.log("you have insuffcient amount by"+c*1);
}

</script>
  <script src="{% static 'js/jquery-3.4.1.min.js' %}"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
  <script src="{% static 'js/bootstrap.js' %}"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
  <script src="{% static 'js/custom.js' %}"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCh39n5U-4IoWpsVGUHWdqB6puEkhRLdmI&callback=myMap"></script>
  
	</body>